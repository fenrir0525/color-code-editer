<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ランダムカラーコード生成器</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .color-box {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .swatch {
      width: 100px;
      height: 50px;
      border: 1px solid #000;
      margin-right: 10px;
    }
    .output {
      font-family: monospace;
      font-size: 1.2em;
      background: #f0f0f0;
      padding: 10px;
      display: inline-block;
      margin-top: 10px;
    }
    button {
      margin-top: 10px;
      padding: 10px 16px;
      font-size: 1em;
    }
    select {
      margin-top: 10px;
      margin-right: 10px;
      padding: 6px;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <h1>ランダムカラーコード生成器</h1>

  <label for="range">🎨 色の系統：</label>
  <select id="range">
    <option value="all">すべて</option>
    <option value="blue">青系</option>
    <option value="red">赤系</option>
    <option value="green">緑系</option>
    <option value="mono">モノトーン</option>
  </select>

  <label for="saturation">💧 彩度：</label>
  <select id="saturation">
    <option value="normal">指定なし</option>
    <option value="high">パキパキ (高彩度)</option>
    <option value="low">淡い色 (低彩度)</option>
  </select>

  <div id="colors"></div>

  <p>📋 コピー用:</p>
  <div class="output" id="copyText"></div>
  <button onclick="copyColors()">コピー</button>

  <br />
  <button onclick="generateColors()">🎲 新しいカラーを生成</button>

  <script>
    // 彩度調整関数（RGBをHSLにして彩度変えるイメージ）
    function adjustSaturation(r, g, b, saturationLevel) {
      // RGB(0-255) → HSL変換
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0; // グレー系
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch(max){
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }

      // 彩度調整
      if (saturationLevel === 'high') {
        s = Math.min(1, s * 1.5 + 0.2);
      } else if (saturationLevel === 'low') {
        s = s * 0.3;
      }
      // HSL → RGB変換関数
      function hue2rgb(p, q, t) {
        if(t < 0) t += 1;
        if(t > 1) t -= 1;
        if(t < 1/6) return p + (q - p) * 6 * t;
        if(t < 1/2) return q;
        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;
        return p;
      }
      let q = l < 0.5 ? l * (1 + s) : l + s - l * s;
      let p = 2 * l - q;
      let R = hue2rgb(p, q, h + 1/3);
      let G = hue2rgb(p, q, h);
      let B = hue2rgb(p, q, h - 1/3);

      return [
        Math.round(R * 255),
        Math.round(G * 255),
        Math.round(B * 255)
      ];
    }

    function randomHex(range, saturationLevel) {
      let r, g, b;

      // 色系統ごとに大体のベース色を決める
      if (range === "blue") {
        r = Math.floor(Math.random() * 100);
        g = Math.floor(Math.random() * 150);
        b = 150 + Math.floor(Math.random() * 105);
      } else if (range === "red") {
        r = 150 + Math.floor(Math.random() * 105);
        g = Math.floor(Math.random() * 100);
        b = Math.floor(Math.random() * 100);
      } else if (range === "green") {
        r = Math.floor(Math.random() * 100);
        g = 150 + Math.floor(Math.random() * 105);
        b = Math.floor(Math.random() * 100);
      } else if (range === "mono") {
        const gray = 50 + Math.floor(Math.random() * 156);
        r = g = b = gray;
      } else {
        r = Math.floor(Math.random() * 256);
        g = Math.floor(Math.random() * 256);
        b = Math.floor(Math.random() * 256);
      }

      // 彩度調整
      [r, g, b] = adjustSaturation(r, g, b, saturationLevel);

      return "#" + [r, g, b].map(x => x.toString(16).padStart(2, "0")).join("").toUpperCase();
    }

    function generateColors() {
      const range = document.getElementById("range").value;
      const saturation = document.getElementById("saturation").value;
      const colors = [randomHex(range, saturation), randomHex(range, saturation), randomHex(range, saturation)];
      const colorsDiv = document.getElementById("colors");
      const copyText = document.getElementById("copyText");

      colorsDiv.innerHTML = "";
      colors.forEach(code => {
        const box = document.createElement("div");
        box.className = "color-box";
        box.innerHTML = `<div class="swatch" style="background:${code}"></div><span>${code}</span>`;
        colorsDiv.appendChild(box);
      });

      copyText.textContent = colors.join("");
    }

    function copyColors() {
      const text = document.getElementById("copyText").innerText;
      navigator.clipboard.writeText(text).then(() => {
        alert("コピーしました: " + text);
      });
    }

    generateColors();
  </script>
</body>
</html>
