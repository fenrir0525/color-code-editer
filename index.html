<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ãƒ©ãƒ³ãƒ€ãƒ ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå™¨</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .color-box {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .swatch {
      width: 100px;
      height: 50px;
      border: 1px solid #000;
      margin-right: 10px;
    }
    .output {
      font-family: monospace;
      font-size: 1.2em;
      background: #f0f0f0;
      padding: 10px;
      display: inline-block;
      margin-top: 10px;
    }
    button {
      margin-top: 10px;
      padding: 10px 16px;
      font-size: 1em;
    }
    select {
      margin-top: 10px;
      margin-right: 10px;
      padding: 6px;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <h1>ãƒ©ãƒ³ãƒ€ãƒ ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå™¨</h1>

  <label for="range">ğŸ¨ è‰²ã®ç³»çµ±ï¼š</label>
  <select id="range">
    <option value="all">ã™ã¹ã¦</option>
    <option value="blue">é’ç³»</option>
    <option value="red">èµ¤ç³»</option>
    <option value="green">ç·‘ç³»</option>
    <option value="mono">ãƒ¢ãƒãƒˆãƒ¼ãƒ³</option>
  </select>

  <label for="saturation">ğŸ’§ å½©åº¦ï¼š</label>
  <select id="saturation">
    <option value="normal">æŒ‡å®šãªã—</option>
    <option value="high">ãƒ‘ã‚­ãƒ‘ã‚­ (é«˜å½©åº¦)</option>
    <option value="low">æ·¡ã„è‰² (ä½å½©åº¦)</option>
  </select>

  <div id="colors"></div>

  <p>ğŸ“‹ ã‚³ãƒ”ãƒ¼ç”¨:</p>
  <div class="output" id="copyText"></div>
  <button onclick="copyColors()">ã‚³ãƒ”ãƒ¼</button>

  <br />
  <button onclick="generateColors()">ğŸ² æ–°ã—ã„ã‚«ãƒ©ãƒ¼ã‚’ç”Ÿæˆ</button>

  <script>
    // å½©åº¦èª¿æ•´é–¢æ•°ï¼ˆRGBã‚’HSLã«ã—ã¦å½©åº¦å¤‰ãˆã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰
    function adjustSaturation(r, g, b, saturationLevel) {
      // RGB(0-255) â†’ HSLå¤‰æ›
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0; // ã‚°ãƒ¬ãƒ¼ç³»
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch(max){
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }

      // å½©åº¦èª¿æ•´
      if (saturationLevel === 'high') {
        s = Math.min(1, s * 1.5 + 0.2);
      } else if (saturationLevel === 'low') {
        s = s * 0.3;
      }
      // HSL â†’ RGBå¤‰æ›é–¢æ•°
      function hue2rgb(p, q, t) {
        if(t < 0) t += 1;
        if(t > 1) t -= 1;
        if(t < 1/6) return p + (q - p) * 6 * t;
        if(t < 1/2) return q;
        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;
        return p;
      }
      let q = l < 0.5 ? l * (1 + s) : l + s - l * s;
      let p = 2 * l - q;
      let R = hue2rgb(p, q, h + 1/3);
      let G = hue2rgb(p, q, h);
      let B = hue2rgb(p, q, h - 1/3);

      return [
        Math.round(R * 255),
        Math.round(G * 255),
        Math.round(B * 255)
      ];
    }

    function randomHex(range, saturationLevel) {
      let r, g, b;

      // è‰²ç³»çµ±ã”ã¨ã«å¤§ä½“ã®ãƒ™ãƒ¼ã‚¹è‰²ã‚’æ±ºã‚ã‚‹
      if (range === "blue") {
        r = Math.floor(Math.random() * 100);
        g = Math.floor(Math.random() * 150);
        b = 150 + Math.floor(Math.random() * 105);
      } else if (range === "red") {
        r = 150 + Math.floor(Math.random() * 105);
        g = Math.floor(Math.random() * 100);
        b = Math.floor(Math.random() * 100);
      } else if (range === "green") {
        r = Math.floor(Math.random() * 100);
        g = 150 + Math.floor(Math.random() * 105);
        b = Math.floor(Math.random() * 100);
      } else if (range === "mono") {
        const gray = 50 + Math.floor(Math.random() * 156);
        r = g = b = gray;
      } else {
        r = Math.floor(Math.random() * 256);
        g = Math.floor(Math.random() * 256);
        b = Math.floor(Math.random() * 256);
      }

      // å½©åº¦èª¿æ•´
      [r, g, b] = adjustSaturation(r, g, b, saturationLevel);

      return "#" + [r, g, b].map(x => x.toString(16).padStart(2, "0")).join("").toUpperCase();
    }

    function generateColors() {
      const range = document.getElementById("range").value;
      const saturation = document.getElementById("saturation").value;
      const colors = [randomHex(range, saturation), randomHex(range, saturation), randomHex(range, saturation)];
      const colorsDiv = document.getElementById("colors");
      const copyText = document.getElementById("copyText");

      colorsDiv.innerHTML = "";
      colors.forEach(code => {
        const box = document.createElement("div");
        box.className = "color-box";
        box.innerHTML = `<div class="swatch" style="background:${code}"></div><span>${code}</span>`;
        colorsDiv.appendChild(box);
      });

      copyText.textContent = colors.join("");
    }

    function copyColors() {
      const text = document.getElementById("copyText").innerText;
      navigator.clipboard.writeText(text).then(() => {
        alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ: " + text);
      });
    }

    generateColors();
  </script>
</body>
</html>
